<!DOCTYPE html>
<html lang = "en">
  <head>
    <meta charset="utf-8">
    <title>Hex Clock</title>
    <link rel = "stylesheet" href = "css/styles.css">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.dev.js"></script>
  </head>
  <body>
    <div class="vertical-flex">
      <section id = "youtube-body">
        <div id="player"></div>
        <div id="yt-control-flex">
          <input id = "youtube-input" type = "text"/>
          <button id = "yt-submit" class="btn">Submit</button>
          <button id = "yt-options" class="btn">...</button>
        </div>
        <!-- TODO Add in a button to search playlists?/display your existing playlist -->
        <div id="yt-search-results">

        </div>

        <script>
        //TODO - put this into a seperate file for simplicity sake

          const windowWidth = window.innerWidth;
          const playerHeight = windowWidth * 0.61;
          const starterVideo = (Math.floor(Math.random() * 214)).toString();


          var tag = document.createElement('script');

          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName('script')[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          var player;
          function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
              height: playerHeight,
              width: windowWidth,
              //videoId: "hHW1oY26kxQ",
              playerVars: {
                color: "white",
                listType: "playlist",
                list: "PL0KqfOQxyR-MLbyTZLFUQuOfr9V5ElNSc",
                index: starterVideo,//Work on getting the list to shuffle each time for random videos
              },
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange,
                'onError': onPlayerError,
              }
            });
          }
          function onPlayerReady(event) {
            event.target.playVideo();
          }
          var done = false;

          function onPlayerStateChange(event) {
            if(event.data === 3){
              event.target.setShuffle({'shufflePlayList' : true});
            }
          }
          function onPlayerError(event){
            console.log("error event:", event);
          }

          //Handling Video changes
          // let submitButton = document.getElementById("submit-button");
          // submitButton.addEventListener("click", () => {
          //   let input = document.getElementById("youtube-input");
          //   let inputValue = input.value;
          //
          //   player.loadPlaylist({
          //     list: inputValue,
          //     listType: "search",
          //   });
          // });
        </script>
        <!-- CUT/PASTE FEST -->
        <script src="https://apis.google.com/js/api.js"></script>
        <script src="./js/youtubePlayer.js"></script>
        <!-- END CUT/PASTE FEST -->
      </section>
      <section id="sys-info">
        <script src="./js/comp-data.js"></script>
      </section>
      <section id="timer">
        <div id="timer-topline">
          <!-- Increment row -->
          <button id="increment-timer-hour" onclick="addHour()">/\</button>
          <button id="increment-timer-minute" onclick="addMinute()">/\</button>
          <button id="increment-time-second" onclick="addSecond()">/\</button>
          <button id="start-timer" onclick="beginCount()">Start</button>
          <!-- Timer Face -->
          <div class="number-container">
            <!--
            number-container is our fixed height box around our number to make sure that we don't have any adverse effects
            from making enough room to scroll
           -->
            <div id="hours-invisible-scroll">
              <!-- Our actual div that scrolls. z-index sits above our hours module. br's give some space to scroll with -->
              <br/><br/><br/><br/>
            </div>
            <p id="timer-hours">00</p>
          </div>
          <p id="timer-minutes">00</p>
          <p id="timer-seconds">00</p>
          <button id="reset-timer" onclick="clearCount()">Reset</button>
          <!-- Decrement Row -->
          <button id="decrement-timer-hour" onclick="rmvHour()">\/</button>
          <button id="decrement-timer-minute" onclick="rmvMinute()">\/</button>
          <button id="decrement-timer-second" onclick="rmvSecond()">\/</button>
          <button id="pause-timer" onclick="pauseCount()">Pause</button>
        </div>
        <script src="./js/timer.js"></script>
      </section>
      <section id = "clock-body">
        <div id = "clock-wrapper">
          <h1 id = "clock"></h1>
          <h2 id = "date"></h2>
        </div>
      </section>
    </div>
  </body>
  <script>
    require('./js/hexClock.js');
  </script>

</html>
