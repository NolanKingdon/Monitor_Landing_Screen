<!DOCTYPE html>
<html lang = "en">
  <head id="head">
    <script src="https://apis.google.com/js/api.js"></script>
    <meta charset="utf-8">
    <title>Hex Clock</title>
    <link rel = "stylesheet" href = "css/styles.css">
    <!--
    <script src="https://www.gstatic.com/firebasejs/6.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.0.0/firebase-database.js"></script>-->

    <script>
      //Requesting our site from the backend
      const http = new XMLHttpRequest();
      http.onreadystatechange = () => {
        if(http.readyState == 4 && http.status == 200){
            // *** Parsing response
            const parsedRes = JSON.parse(http.responseText);
            const DOM = parsedRes.DOMPile;
            const CSS = parsedRes.cssPile;
            const SCRIPTS = parsedRes.scriptPile;
            // *** Setting the DOM to our collected HTML

            let cols = document.getElementsByClassName("vertical-flex");

            for(let i=0; i<Object.keys(DOM).length; i++){//Iterating through all dom cols
              if(cols[i]){
                cols[i].innerHTML += DOM[i];
              }
            }

            // *** Appending CSS links to the head

            for(let i=0; i<CSS.local.length; i++){
              let link = document.createElement("link");
              link.rel = "stylesheet";
              link.href = CSS.local[i];
              head.appendChild(link);
            }

            for(let i=0; i<CSS.external.length; i++){
              let link = document.createElement("link");
              link.rel = "stylesheet";
              link.href = CSS.external[i];
              head.appendChild(link);
            }

            //Putting all the external script tags at the top so we can have them before the bottom ones

            for(let i=0; i<SCRIPTS.external.length; i++){
              let script = document.createElement("script");
              script.src = SCRIPTS.external[i];
              head.appendChild(script);
            }

            //Putting all the local script tags at the bottom so they run when everything loads
            const scriptDump = document.getElementById("script-dump");
            for(let i=0; i<SCRIPTS.local.length; i++){
              let script = document.createElement("script");
              script.src = SCRIPTS.local[i];
              scriptDump.appendChild(script);
            }
        }
      }
      http.open("GET", "http://localhost/moduleHandler");
      http.send();
    </script>
  </head>
  <body id="test">
    <div class="horizontal-flex">
      <div class="vertical-flex">
        <!--<section id="todo">
          <script src="./js/firebase.js"></script>
          <h2 id="todo-section-title">-TODO-</h2>
          <a href="#" id="todo-display-add" onclick="toggleAddInterface()"><h2>+</h2></a>
          <div id="todo-list">
            <div class="todo-section">
              <div class="todo-section-header" onclick="hideList('personal')">
                <p id="todo-personal-head">+</p>
                <p class="todo-section-label todo-closed">Personal</p>
                <p class="todo-section-active" id="todo-personal-open">0</p>
                <p class="todo-section-next" id="todo-personal-next"></p>
              </div>
              <div class="todo-section-list" id="todo-personal-list">
              </div>
            </div>
            <div class="todo-section">
              <div class="todo-section-header" onclick="hideList('hobby')">
                <p id="todo-hobby-head">+</p>
                <p class="todo-section-label todo-closed">Hobby</p>
                <p class="todo-section-active" id="todo-hobby-open">0</p>
                <p class="todo-section-next" id="todo-hobby-next"></p>
              </div>
              <div class="todo-section-list" id="todo-hobby-list">
              </div>
            </div>
            <div class="todo-section">
              <div class="todo-section-header" onclick="hideList('school')">
                <p id="todo-school-head">+</p>
                <p class="todo-section-label todo-closed" >School</p>
                <p class="todo-section-active" id="todo-school-open">0</p>
                <p class="todo-section-next" id="todo-school-next"></p>
              </div>
              <div class="todo-section-list" id="todo-school-list">
              </div>
            </div>
          </div>
          <form id="todo-form">
            <input class="input" type="text" id="todo-title" placeholder="Task"></input>
            <select class="input" id="todo-list-types">
              <option value="personal">Personal</option>
              <option value="school">School</option>
              <option value="hobby">Hobby</option>
            </select>
            <button class="btn" type="reset">lol jk</button>
            <textarea class="input" id="todo-notes" placeholder="Notes"></textarea>
            <input class="input" type="date" id="todo-date"></input>-->
            <!-- <input type="time" id="todo-time"></input> -->
            <!--<button class="btn" id="todo-add">Add</button>
          </form>
          <form id="todo-edit-form">
            <input class="input" type="text" id="todo-title-edit" placeholder="Task"></input>
            <select class="input" id="todo-list-types-edit">
              <option value="personal">Personal</option>
              <option value="school">School</option>
              <option value="hobby">Hobby</option>
            </select>
            <button class="btn" type="reset" onclick="toggleEditInterface()">lol jk</button>
            <textarea class="input" id="todo-notes-edit" placeholder="Notes"></textarea>
            <input class="input" type="date" id="todo-date-edit"></input>
            <button class="btn" id="todo-edit">Edit</button>
          </form>
          <script src="./js/todos.js"></script>
        </section>-->
      </div>
      <div class="vertical-flex">
    </div>
  </div>
  <section id="script-dump">
    <script src="http://localhost:80/socket.io/socket.io.js"></script>
  </section>
  </body>
</html>
